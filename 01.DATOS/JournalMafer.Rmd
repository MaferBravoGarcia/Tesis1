---
title: "Journal"
author: "Mafer Bravo"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  html_document:
    fig_height: 8
    fig_width: 13
    number_section: yes
    theme: cerulean
    toc: yes
    toc_float:
      collapsed: no
      smooth_scroll: yes
  pdf_document:
    toc: yes
  word_document:
    toc: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Librerias

La base es la libreria seqtime  <https://github.com/MaferBravoGarcia/seqtime>. 

[Artículo](https://microbiomejournal.biomedcentral.com/articles/10.1186/s40168-018-0496-2 "Este es el título") de Faust


Para instalarla: 

```{r message=FALSE, warning=FALSE}
library(devtools)  
install_github("hallucigenia-sparsa/seqtime")  
library(seqtime) 
```

## Matriz

**porcentaje edges positivos (pep)**  : En el paper reportan edges negativos 70% para sujeto A y 63% para B. Usaré 10% de pep, para que no me salgan tan altos & sea error. 

**conectance (c)**: Usaré el 0.05, valor más cercano para food network & dentro del rango inferido para microbial net. 

```{r warning=FALSE}
#N: No. de especies 
N = 10 
pep = 10
conec = 0.05

A = generateA(N,"klemm", pep = pep, c = conec)
```
NOTA: Los valores de la matriz cambian cada que se cierra & abre el R. 

## Modelos 

### Modelos del [Artículo](https://microbiomejournal.biomedcentral.com/articles/10.1186/s40168-018-0496-2 "Este es el título") de Faust

#### Ricker 

Revisar lo de K, en el artículo dice que la capacidad de carga es una distribución uniforme de 0 a 0.5. 

```{r}
#tiempo
tend = 15
#noise, término de fuerza
sigm = c(0.01,0.05,0.1)
#capacidad de carga
cap = 0.01

for (sig in sigm) {
  rickerplot=tsplot(ricker(N,A=A,K=rep(cap,N), tend=tend, sigma = sig), main = paste("Ricker", "%ep =", pep, "c =", conec, "σ =", sig, "K =", cap), legend = TRUE ) 
}

```


**GUARDAR**  `setwd("~/Microtesis/Tesis1/03.OUTPUT/PLOTS/RICKER/")` 

**RData**  `save(rickerplot, file = paste("Ricker", "N =", N, "Tiempo = ", tend, "pep =", pep, "c =", conec, "sigma =", sig, "K =", cap,".RData"))`

**PDF**   `pdf(paste("Ricker", "N =", N, "Tiempo = ", tend, "pep =", pep, "c =", conec, "sigma =", sig, "K =", cap, ".pdf"))`


#### gLV 

```{r}

tend = 1.5
grmin = 0
grmax = 0.5


glvplot=tsplot(glv (N, A=A, tend=tend, b = runif(N, min = grmin, max = grmax)), main = paste("gLV", "%ep =", pep, "c =", conec, "tasa crecimiento", grmin, "-", grmax), legend = TRUE )

```
NOTA: `tend = 15` grafica tiempo de 150. idk why :c 

**GUARDAR**  `setwd("~/Microtesis/Tesis1/03.OUTPUT/PLOTS/gLV/")` 

**RData**  `save(glvplot, file = paste("gLV", "N =", N, "Tiempo = ", tend, "pep =", pep, "c =", conec, "tasa crecimiento", grmin, "-", grmax,".RData"))`

**PDF**   `pdf(paste("gLV", "N =", N, "Tiempo = ", tend, "pep =", pep, "c =", conec, "tasa crecimiento", grmin, "-", grmax, ".pdf"))`


#### SOI

¿Cuántos individuos poner? 

```{r}

soiplot=tsplot(soi(N, A=A, I=20, tend=15), main= "SOI")

```

  **GUARDAR**   `setwd("~/Microtesis/Tesis1/03.OUTPUT/PLOTS/")`  `save(soiplot, file = "Soi.RData")`
  
#### HUBBELL 

¿Qué poner en metacomunidad? 

```{r}

M = 100
metapop <- generateAbundances(N = M, mode = 5, probabs = TRUE)
hubplot = tsplot(simHubbell(N = N, M = M, I = 20, d = N, m=0.1,  m.vector = metapop, tskip=500, tend=1000))

```

  **GUARDAR**   `setwd("~/Microtesis/Tesis1/03.OUTPUT/PLOTS/")`  `save(hubplot, file = "Hubbell.RData")`
  
  

